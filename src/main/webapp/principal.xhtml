<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
  <h:head>
    <title>Login JSF con PrimeFaces</title>
  </h:head>
  <h:body>
    <f:view>
      <h:form id="loginForm">
        <p:panel header="Iniciar Sesión"
                 style="width:300px; margin:50px auto 0;">
          
          <!-- Mensajes globales -->
          <h:messages id="msgs"
                      globalOnly="true"
                      showDetail="true"
                      style="margin-bottom:10px; color: #e53935;" />

          <!-- Campos dentro de una grid para mejor alineación -->
          <h:panelGrid columns="1" columnClasses="labelCol" style="width:100%;">
            <p:outputLabel for="username" value="Usuario" />
            <p:inputText id="username"
                         value="#{validarIngreso.username}"
                         required="true"
                         requiredMessage="El usuario es obligatorio"
                         placeholder="Ingrese su usuario"
                         style="width:100%; margin-bottom:10px;" />

            <p:outputLabel for="password" value="Contraseña" />
            <p:password id="password"
                        value="#{validarIngreso.password}"
                        required="true"
                        requiredMessage="La contraseña es obligatoria"
                        placeholder="Ingrese su contraseña"
                        style="width:100%; margin-bottom:15px;" />
          </h:panelGrid>

          <!-- Botón Ingresar: procesa todo el form y actualiza sólo los mensajes -->
          <p:commandButton value="Ingresar"
                           action="#{validarIngreso.login}"
                           process="@form"
                           update="msgs"
                           style="width:100%; margin-bottom:10px;"
                           icon="pi pi-sign-in" />

          <!-- Botón Registrarme: salta validaciones, sólo actualiza mensajes -->
          <p:commandButton value="Registrarme"
                           action="#{validarIngreso.registrarme}"
                           process="@this"
                           update="msgs"
                           immediate="true"
                           style="width:100%;"
                           icon="pi pi-user-plus" />
        </p:panel>
      </h:form>
    </f:view>
  </h:body>
</html>
